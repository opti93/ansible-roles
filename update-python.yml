---
- name: Updating python
  hosts: cluster
  tasks:
    - name: install ppa
      apt_repository:
          repo: "ppa:deadsnakes/ppa"
          state: present
          update-cache: yes
    - name: install python 3.6
      apt:
        name: python3.6
        update-cache: yes
    - name: install python 3.7
      apt:
        name: python3.7
        update-cache: yes
    - name: install python pip
      apt:
        name: python3-pip
        update-cache: yes
    - name: python3.6
      community.general.alternatives:
        name: python3.6
        path: /usr/bin/python3.6
        priority: 1
    - name: python3.7
      community.general.alternatives:
        name: python3.7
        path: /usr/bin/python3.7
        priority: 2